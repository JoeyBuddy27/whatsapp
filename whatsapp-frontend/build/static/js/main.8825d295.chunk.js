(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{54:function(e,a,t){e.exports=t(86)},59:function(e,a,t){},60:function(e,a,t){},86:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(11),s=t.n(c),i=(t(59),t(51)),l=t(9),o=(t(60),t(42)),u=t.n(o),m=t(43),d=t.n(m),_=t(107);var h=function(e){return r.a.createElement("div",{className:"sidebarChat"},r.a.createElement(_.a,{src:e.avatar}),r.a.createElement("div",{className:"sidebarChat__info"},r.a.createElement("h2",null,e.name),r.a.createElement("p",null,e.lastMessage)),e.online&&r.a.createElement(_.a,{className:"sidebarChat__online"}," "))},v=t(44),p=t.n(v),b=t(106),E=t(45),f=t.n(E),g=Object(n.createContext)(),w=function(e){var a=e.reducer,t=e.initialState,c=e.children;return r.a.createElement(g.Provider,{value:Object(n.useReducer)(a,t)},c)},N=function(e){return Object(n.useContext)(g)};var j=function(e){var a=e.messages,t=N(),n=Object(l.a)(t,2),c=n[0],s=n[1];return a.filter((function(e){return e.currentUser===c.currentUser||"You"===e.name&&e.currentUser===c.currentUser})),r.a.createElement("div",{className:"sidebar ".concat(c.isSidebarHidden?"sidebar__hide":" ")},r.a.createElement("div",{className:"sidebar__header"},r.a.createElement(_.a,{className:"sidebar__header__avatar",src:"https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-9/98441061_10157040823906712_4132654932786413568_o.jpg?_nc_cat=108&_nc_sid=09cbfe&_nc_ohc=9wchdriyh8gAX_U0SVM&_nc_ht=scontent-lht6-1.xx&oh=d75b86134dab70faf6580db0317763e1&oe=5F99E78D"}),r.a.createElement("div",{className:"sidebar__header__right"},r.a.createElement(b.a,null,r.a.createElement(u.a,{className:"donut"})),r.a.createElement(b.a,null,r.a.createElement(d.a,null)),r.a.createElement(b.a,null,r.a.createElement(p.a,null)))),r.a.createElement("div",{className:"sidebar__search"},r.a.createElement("div",{className:"sidebar__search__container"},r.a.createElement(f.a,null),r.a.createElement("input",{type:"text",placeholder:"Search or start new chat!"}))),r.a.createElement("div",{className:"sidebar__chats"},c.users.map((function(e){var t,n=a.filter((function(a){return a.currentUser===e.name}));return r.a.createElement("div",{key:e.id,onClick:function(){return function(e){s({type:"CHANGE_ROOM",currentUser:e.name,currentAvatar:e.avatar,isSidebarHidden:!0})}(e)}},r.a.createElement(h,{messages:a,key:e.id,name:e.name,avatar:e.avatar,lastMessage:null===(t=n[n.length-1])||void 0===t?void 0:t.message,online:e.online}))}))))},O=t(27),S=t.n(O),y=t(46),U=t(100),k=t(101),C=t(102),H=t(103),x=t(104),A=t(105),M=t(47),P=t.n(M).a.create({baseURL:"https://live-chat-app-joe.herokuapp.com"}),T=t(48),B=t.n(T),R=t(49),D=t.n(R);var Y=function(e,a){var t=e.messages,c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],o=s[1],u=N(),m=Object(l.a)(u,2),d=m[0],h=m[1],v=Object(n.useState)(!1),p=Object(l.a)(v,2),E=p[0],f=p[1],g=function(){var e=Object(y.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,P.post("/messages/new",{message:i,name:E?d.currentUser:"You",timestamp:new Date,received:!!E,currentUser:d.currentUser});case 3:o("");case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=Object(n.useRef)(null);return Object(n.useEffect)((function(){w.current.scrollIntoView({behavior:"smooth"})}),[t]),r.a.createElement("div",{className:"chat ".concat(d.isSidebarHidden?"chat__show":" ")},r.a.createElement("div",{className:"chat__header"},r.a.createElement("div",{className:"div",onClick:function(){h({type:"OPEN_CHATS",isSidebarHidden:!1})}},r.a.createElement(b.a,null,r.a.createElement(U.a,null))),r.a.createElement(_.a,{src:d.currentAvatar}),r.a.createElement("div",{className:"chat__header__info"},r.a.createElement("h3",null,d.currentUser)),r.a.createElement("div",{className:"div__chat__header__right"},r.a.createElement(b.a,null,r.a.createElement(k.a,null)),r.a.createElement(b.a,null,r.a.createElement(C.a,null)),r.a.createElement(b.a,null,r.a.createElement(H.a,null)))),r.a.createElement("div",{className:"chat__body"},t.filter((function(e){return e.name===d.currentUser||"You"===e.name&&e.currentUser===d.currentUser})).map((function(e){return r.a.createElement(D.a,null,r.a.createElement("div",{key:Math.random()},r.a.createElement("p",{key:e.id,className:"chat__body__message ".concat(e.received&&"chat__body__receiver")},r.a.createElement("span",{className:"chat__body__message__name"},e.name),""!==e.message?e.message:null,r.a.createElement("span",{className:"chat__body__message__timestamp"},B()(e.timestamp).fromNow()))))})),r.a.createElement("div",{ref:w})),r.a.createElement("div",{className:"chat__footer"},r.a.createElement(x.a,null),r.a.createElement("form",{action:"",className:"chat__footer__form"},r.a.createElement("input",{value:i,onChange:function(e){return o(e.target.value)},type:"text",placeholder:"type a message"}),r.a.createElement("p",{onClick:function(e){return function(e){e.preventDefault(),f(!E)}(e)}},"Sending as",r.a.createElement("span",{className:"chat__footer__form__sendAs"},E?"".concat(d.currentUser):"You")),r.a.createElement("button",{className:"chat__footer__form__submit",onClick:g,type:"submit"},"Send")),r.a.createElement(A.a,null)))},F=t(50),G=t.n(F);var I=function(){var e=Object(n.useState)([]),a=Object(l.a)(e,2),t=a[0],c=a[1];return Object(n.useEffect)((function(){P.get("/messages/sync").then((function(e){c(e.data)}))}),[]),Object(n.useEffect)((function(){var e=new G.a("c6c60b7089033928282a",{cluster:"eu"}).subscribe("messages");return e.bind("inserted",(function(e){c([].concat(Object(i.a)(t),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[t]),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__body"},r.a.createElement(j,{messages:t}),r.a.createElement(Y,{messages:t})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=t(21),Q={users:[{id:"0",name:"Phil",avatar:"https://s.studiobinder.com/wp-content/uploads/2019/09/Quentin-Tarantinos-Star-Trek-Featured-StudioBinder.jpg",online:!0},{id:"1",name:"Kidsan",avatar:"https://i.insider.com/5f0a67534dca6808ef640f43?width=1100&format=jpeg&auto=webp"},{id:"2",name:"Cian",avatar:"https://www.indiewire.com/wp-content/uploads/2019/02/shutterstock_10118627hz.jpg"},{id:"3",name:"Shane",avatar:"https://www.cheatsheet.com/wp-content/uploads/2020/09/Brad-Pitt-4-1024x689.jpg"}],currentUser:"Phil",currentAvatar:"https://s.studiobinder.com/wp-content/uploads/2019/09/Quentin-Tarantinos-Star-Trek-Featured-StudioBinder.jpg",isSidebarHidden:!1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHANGE_ROOM":return Object(J.a)(Object(J.a)({},e),{},{currentUser:a.currentUser,currentAvatar:a.currentAvatar,isSidebarHidden:a.isSidebarHidden});case"OPEN_CHATS":return Object(J.a)(Object(J.a)({},e),{},{isSidebarHidden:a.isSidebarHidden});default:return e}};s.a.render(r.a.createElement(w,{initialState:Q,reducer:V},r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.8825d295.chunk.js.map